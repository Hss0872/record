# 후니의 쉽게 쓴 네트워킹

## part 1

- 네트워킹(Networking) : 장비들을 서로 대화가 가능하도록 묶어주는 것
- 인터넷(Internet) : 여러 개의 네트워크를 묶었다. ( Inter : 연결을 의미 )
  - 특징 : 하나의 프로토콜(TCP/IP)만 사용한다.
- www : World Wide Web

## part 2

- LAN(Local Area Network) : 한정된 공간에서 네트워크를 구성
- WAN(Wide Area Network) : 멀리 떨어진 지역을 서로 연결하는 경우

- 이더넷(Ethernet) : 네트워킹의 한 방식
  - CSMA/CD(Carrier Sense Multiple Access / Collision Detention) 프로토콜을 사용한다.
    - CSMA/CD 프로토콜 방식
    1. Carrier Sense : 캐리어가 있는지 감지 (Carrier : 네트워크상의 신호라고 생각하자)
    2. 통신이 없어지면 무조건 자기 데이터를 네트워크상에 실어서 보냄
    3. Mulitple Access : 2개 이상의 PC나 서버가 동시에 네트워크상에 데이터를 실어 보내는 경우 발생 
    4. Collision Detension데이터를 실어 보내고 Collision이 발생하지 않았는지 점검
    5. 만약 발생했다면 랜덤한 시간 동안 기다린 후 다시 데이터 전송

- 토큰링(TokenRing) : 다른 네트워크의 방식 (잘 사용 안함)
- UTP 케이블(Unshielded Twisted - pair) : 주로 사용하는 케이블, 감싸지지 않았고 두 가닥이 꼬여 있는 케이블
- STP 케이블 : 절연체로 감싸서 만든 케이블
- 카테고리 번호 : 케이블 종류
- ex ) 10 Base T 
  - 10 : 속도를 의미한다. 10Mbps의 솔도를 지원하는 케이블
  - Base : 케이블이 Baseband용 케이블이라는 것을 알려줌
    - 케이블 종류는 베이스밴드와 브로드밴드가 있다.
      - 베이스밴드 : 디지털방식 , 브로드밴드 : 아날로그 방식
  - T : 이 자리는 케이블의 종류 또는 케이블이 전송할 수 있는 최대 거리가 나온다. 여기서 T란 TP를 나타낸다.
- 맥 어드레스(MAC Address) : 서로를 구분할 일종의 주소다.
  - 인터넷은 TCP/IP로 통신을 하고 그 통신을 하기 위해선 IP 주소를 사용한다.
  - IP주소를 사용하지만 사실은 IP 주소를 다시 MAC으로 바꾸는 절차(ARP : Address Resolution Protocol)를 밟고 있다.
    - ex ) PC Y가 PC Z와 통신을 한다고 가정하자 , 같은 네트워크 안에 있을 경우 (ARP 요청과 응답)
      - 이때 PC Y는 Z의 IP 주소를 알고 있다. 그럼 Y는 자기가 속한 네트워크에 있는 모든 PC에게 메시지를 보낸다. (브로드캐스트)
      - Z는 Y와 같은 네트워크에 있기 때문에 브로드캐스트를 받고 Z는 Y에게 맥 어드레스를 알려주게 되고 비로소 통신이 시작하게 된다.
    - ex ) 만약 다른 네트워크인 경우 라우터를 넘어서 다른 네트워크에 Z가 있다.
      - Y가 브로드캐스트를 보내도 호스트 Z는 메시지를 받을 수 없다. ( 라우터가 중간에 브로드캐스트를 막는다는 정도만 알고 있자)
      - 만약 Y가 브로드캐스트를 보내면 라우터가 PC Z의 IP 주소를 보고 없는 것을 알기 때문에 라우터 자신의 맥 어드레스를 보내준다.
      - 따라서 Y는 정보를 보낼 떄 라우터의 맥 어드레스로 보낸다.
      - 그럼 그 정보를 라우터가 받은 후 Z가 있는 해당 네트워크로 넘겨준다. (그쪽에 있는 라우터로 전달)
      - 그럼 그 라우터가 PC Z의 맥 어드레스를 찾게 되고 Z의 맥 어드레스를 이용해서 정보를 전달한다.
  - MAC(Media Access Control) Address 는 48bit(6octet : 옥텟이란 8개의 비트를 묶은 것)이다. 16진수로 표현한다.
  - 랜카드 또는 네트워크 장비에 고정되어 있는 주소이고 유일하다.
  - 앞쪽의 6개 16진수는 생산자를 나타내는 코드, 뒤에 오는 나머지 6자리의 수는 Host Identifier 이다. 시리얼 넘버인 셈이다.
- 유니캐스트(Unicast) : 네트워크상에서 가장 많이 사용되는 트래픽, 1:1이다.
  - 프레임 안에 출발지와 목적지의 주소, 맥 어드레스를 써놓고 뿌린다. (로컬 이더넷의 기본 성격이 붙어있는 모든 PC들에게 정보를 뿌리는 Shared 방식이다.)
  - 로컬 네트워크들은 프레임에서 자신의 랜카드 맥 어드레스와 비교한다.
  - 만약 다르다면 프레임을 버리고, 같다면 이 프레임을 CPU로 올려보낸다. (그래서 CPU에 성능을 저하시키지 않는다.)
  - 결국 특정 목적지의 주소 하나만을 가지고 통신하는 방식이다.
- 브로드캐스트(Broadcast) : 로컬 랜에 붙어 있는 모든 네트워크 장비들에게 보내는 통신
  - 로컬 랜 : 라우터에 의해 구분된 공간, 브로드캐스트 도메인이라고 하는 공간
  - 이 방식은 프레임을 뿌리게 되면 모든 로컬 네트워크들은 무조건 받는다.
  - 브로드캐스트의 주소는 FFFF.FFFF.FFFF(맥 어드레스로 했을 때) 이다. 항상 패킷을 CPU로 보내게 되고 CPU가 패킷을 처리한다.
  - EX ) ARP
- 멀티캐스트(Multicast) : 보내고자 하는 그룹 멤버들에게만 한 번에 보낼 수 있다.
  - 라우터나 스위치에서 이 기능을 지원하는 경우에만 사용 가능
- OSI 7 Layer (Open Systems Interconnection 7 Layer)
  - Application Layer, Presentation Layer, Session Layer, Transport Layer, Network Layer, Data Link Layer, Physical Layer
  - 장점
    - 데이터의 흐름이 한눈에 보인다.
    - 문제를 해결하기 편리하다.
    - 표준화를 하니까 여러 회사 장비를 써도 네트워크가 이상 없이 돌아간다.
      - Data Link Layer : 송수신되는 정보의 오류와 흐름을 관리, 통신에서 오류도 찾아주고 재전송하는 기능이 있고 맥 어드레스로 통신을 하게 해준다. 이 계층에서 전송되는 단위가 프레임이고 대표적인 장비는 스위치, 브리지 등이 있다.
      - Network Layer : 경로를 선택, 주소를 정하며, 경로에 따라 패킷을 전달해주는 역할을 한다. (라우팅) 데이터를 목적지까지 가장 안전하고 빠르게 전달한다.
      - Transport Layer : 플로 컨트롤과 에러 복구 기능, 즉 에러 복구를 위해 패킷을 재전송하거나 플로럴 조절해서 데이터가 정상적으로 전송될 수 있도록 한다.
  - 처음의 데이터에서 층을 거칠때마다 계층을 잘 지나갈 수 있도록 헤더에 여러가지 정보를 추가한다. 예를들어 네트워크 계층에는 ip주소를 추가
- 프로토콜(Protocol) : 통신 규약 또는 통신 방식에 대한 약속, 프로토콜이 같은 것 끼리만 대화, 즉 통신이 가능하다.

## part 3

- 인터넷을 사용하기 위한 프로토콜은 TCP/IP이고 이미 컴퓨터에 이 프로토콜이 세팅되어 있다.
- TCP/IP는 IP 계층을 사용하면서 그 위에 사용하는 프로토콜이 TCP로 사용한다는 의미이다.
  - TCP/IP 계층은 애플리케이션 계층(Telnet, FTP, HTTP), 트랜스포트 계층(TCP, UDP), 인터넷 계층(IP), 네트워크 엑세스 계층(Network Driver, Hardware)으로 구성되어 있다.
- IP 주소 : 전 세계적으로 유일한 주소
- NAT(Network Address Translation) 방식 :  IP주소는 한정되어 있기 때문에 내부 네트워크에서는 공인되지 않은 IP 주소를 사용하고, 인터넷으로 나갈 때만 공인 주소(유일한 IP주소)를 가지고 나가는 방식
- PAT 방식 : 동일한 IP주소를 가지고 여러 명이 포트넘버만 바꾸는 방식
- DHCP(Dynamic Host Configuration Protocol) : IP 주소를 자동으로 배정해준다. PC마다 하나하나 IP 주소를 미리 지정해두지 않는다. DHCP 서버가 모든 IP주소를 가지고 있다가 클라이언트 PC가 켜지면서 네트워크에 브로드캐스트를 뿌린다. 그러면 DHCP서버는 IP를 하나 배정해준다.

## part 4

- 랜카드 역할 : 유저의 데이터를 케이블에 실어서 허브나 스위치, 라우트에 전달해주고 자신에게 온 데이터를 CPU에 전달
- PC의 버스 방식 : PCI방식(가장 많이 사용), ISA(아이사) 방식, EISA(이아이사) 방식
  - 버스 : 컴퓨터에서 데이터가 날아다니는 길
- 랜카드에 접속하는 케이블 종류에 따라서 랜카드 종류가 나뉜다.
- 랜카드 정보를 보면 IRQ(인터럽트 요청), Base Memory(메모리 범위) 등이 나타난다.
- 내가 목적지인 데이터가 들어왔을 때 컴퓨터의 CPU에 IRQ를 이용해 인터럽트를 건다. CPU는 IRQ 번호를 보고 인터럽트를 누가 걸었는지 확인한다. 그리고 데이터를 미리 정해놓은 장소(Base Memory)로 이동해서 작업을 시작한다.
- 요즘은 랜카드를 꽂고 부팅하면 PC가 자동으로 안쓰는 IRQ를 배정해준다.
---
- 논리적 망 분리 : CBC(Client Based Computing), SBC(Server Based Computing)
  - CBC : PC에서 업무 영역과 인터넷 영역을 나누는 방식이다.
    - EX) 업무 영역에서 웹 브라우저를 열면 인터넷을 쓸 수 없고, 인터넷 영역에서 업무 파일을 찾으려면 못 찾게 막아놓은 것이다.
  - SBC : 모든 프로그램은 서버에서 동작하고 PC는 키보드 입력과 화면을 뿌려주는 것만 담당한다. (== VDI)

- - -

- 허브 : 멀티포트(Multiport) 리피터(Repeater) 이다.
  - 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려준다.
  - 리피터 : 중간에 들어온 데이터를 다른 쪽으로 전달하는 역할
- 콜리전 도메인(Collision Domain) : 같은 허브에 연결되어 있는 모든 PC들을 "같은 콜리전 도메인에 있다" 라고 말한다.
- 모든 PC들은 하나의 콜리전 도메인 안에 있기 때문에 한 PC만 데이터를 보낼 수 있다. == Shared 허브
- 허브의 종류 : 인텔리전트(Intelligent) 허브, 더미(Dummy) 허브, 세미인텔리전트(Semi - Intelligent) 허브
- 인텔리전트 허브 : 지능형 허브로 NMS(네트워크 관리 시스템)를 통해서 관리
  - 만약 허브에 연결된 한 pc에 문제가 발생해서 데이터를 계속 보낸다면 인텔리전트 허브는 문제가 계속되는 포트를 방출시켜버린다. 또 분리된 포트는 허브에서 램프로 표시된다. (Auto Partition)
- 세미(semi) 더미 허브 : 일단 더미 허브인데 인텔리전트 허브와 연결하면 자기도 인텔리전트 허브가 된다.
- 스태커블(Stackable) 허브 : 쌓을 수 있는 허브
  - 보통 스태커블(Stackable, 스택이 가능한)과 스탠드얼론(Standalone, 단독) 형이 있다.
  - 단독형도 같이 연결은 되지만 스태커블의 경우 서로 간의 연결이 훨씬 효율적으로 설계되어있다.
---
- 콜리전 도메인을 나눌 수 있는 장비 : 스위치(Switch), 브리지(Bridge), 스위치의 모든 기능은 브리지에서 출발한다.
- 허브의 장점 : 데이터 처리 속도는 일반적으로 스위치보다 빠르다.
- 스위치가 아무리 콜리전 도메인을 나누었다 하더라고 서버와의 통신은 한순간에는 하나의 pc만 가능하게 된다. 서버가 한 대밖에 없기 때문이다.
- 붙어있는 모든 장비가 한 곳으로만 향하는 경우는 스위치나 허브나 속도의 차이가 크게 나지 않는다.
- - -
- 브리지/스위치의 기능
  - Learning, 배운다.
    - 자신의 포트에 연결된 PC가 통신을 위해 프레임을 내보내면 이 PC의 맥 어드레스를 읽어서 자신의 맥 어드레스 테이블(브리지 테이블)에 저장한다.
  - Flooding, 모르면 들어온 포트를 제외한 다른 모든 포트에게 뿌린다.
    - 들어온 프레임의 목적지 주소가 브리지 테이블에 없다면 나머지 포트로 뿌려준다. , 브로드캐스트나 멀티캐스트의 경우에도 발생
  - Forwarding, 해당 포트로 건네준다.
    - 브리지가 목적지의 맥 어드레스를 가지고 있고 출발지의 맥 어드레스와 다른 세그먼트에 존재하는 경우에 발생
  - Filtering, 다른 포트로는 못 건너가게 막는다.
    - 브리지를 못 넘어가게 막는다. 출발지와 목적지가 같은 세그먼트에 있는 경우 발생, 브리지의 필터링 때문에 양쪽 세그먼트에서 동시에 통신이 가능한 것이다.
  - Aging, 나이를 먹는다.
    - 브리지 테이블도 시간이 지나면 정보를 지우게 된다. Aging는 이것과 관련된 타이머이다.
- 브리지와 스위치의 차이점
  - 브리지의 경우 프레임의 처리 방식이 소프트웨어적 프로그램에 의해 처리되는 방식이지만, 스위치의 경우 하드웨어 방식으로 만드는 ASIC(Application-Specific Integrated Circuit)방식이기 때문에 훨신 빠르다.
  - 스위치는 포트 수가 훨씬 많다.
  - 스위치는 Cut-through, Store-and-forward 방식이지만 브리지는 오로지 Store-and-forward 방식이다.
    - 스토어-앤-포워드(Store-and-forwarding) 방식 : 일단 들어오는 프레임은 전부 받아들인 후 처리를 시작하는 방식, 에러가 발견되면 프레임을 버리고 재전송을 요청하기 때문에 에러 복구 능력이 뛰어나다.
    - 컷스루(cut-through) 방식 : 스위치가 들어오는 프레임의 목적지 주소"만" 본 후 바로 전송 처리를 시작하는 방식, 에러를 찾아내기 어렵다.
  - - -
  - 루핑(Looping) : 프레임이 네트워크상에서 무한정으로 뱅뱅 돌아서 다른 pc가 데이터 전송을 하지 못하는 상태
  - 브리지나 스위치에 목적지까지의 경로가 두 개 이상 존재하면 반드시 루핑이 발생하고, 이를 막는 것이 스패닝 트리 알고리즘이다.
    - 폴트 톨러런트(Fault Tolerant) : 장애 대비를 해놓는 것
      - 장애 대비책으로 대부분 이중 구조를 의미하고 전체 네트워크가 하나의 지점에서 발생한 장애로 인해 영향을 받는 것을 방지하기 위한 대책이다.
    - 로드 밸런싱(Load Balancing) : 두 개의 인터넷 회선을 사용하는 것
      - 대부분 로드 밸런싱은 폴트 톨러런트가 가능하다.
- 스패닝 트리 알고리즘(Spanning Tree Algorithm) : 스위치나 브리지에서 발생하는 루핑을 미리 막기 위해 두 개 이상의 경로가 발생하면 하나를 제외하고 나머지 경로를 자동으로 막아두었다가 기존 경로에 문제가 생기면 막아놓은 경로를 풀어서 데이터를 전송하는 알고리즘
- - -
- 스위치의 근본적인 문제
  - 브로드캐스트 : 브로드캐스트 영역(도메인)을 나눠주기 위해서는 라우터가 꼭 필요하다.
- 노트 : 네트워크에 접속되는 장비
- 라우터는 스위치가 보장 못하는 보안 기능, 즉 패킷 필터링 기능을 제공한다. 그리고 로드 분배 기능도 있다. 즉 여러 개의 경로를 가지고 있다. 그리고 트래픽의 순서를 조정해주는 QoS(Quality of Service) 기능도 있다.
  
  
